# FUTURE_ALPHA - 可实现的前沿功能

> 📅 更新日期：2026-01-04
> 
> 🎯 基于现有代码库的**深度理解**，提出**技术上可实现、用户体验上有突破**的功能设想。每个功能都有明确的实现路径。

---

## 核心原则

1. **用户场景优先** - 每个功能解决一个真实痛点
2. **渐进式实现** - 从最小可用版本开始迭代
3. **复用现有架构** - 基于 `AIManager`、`useAISprouting`、`syncService` 扩展

---

## 1. 智能画布助手

> 💡 将自然语言转化为画布操作，让用户"说"出想法而不是手动操作

### 1.1 命令式画布操作

**用户场景**：用户对着30张卡片的画布说"把相关的卡片放一起"。

**实现方案**：
```
输入框输入 "/" 触发命令模式：
  /整理 → AI分析所有卡片内容，按主题自动分组到Zone
  /删除空卡片 → 删除所有空白或内容过少的卡片  
  /翻译成英文 → 批量翻译所有卡片
  /连接相关 → AI识别语义相关的卡片，自动建立连接
```

**技术实现**：
- 基于现有 `ChatBar.jsx` 添加命令解析
- 调用 `AIManager.requestTask` 分析卡片内容
- 通过 `cardSlice.updateCard` 和 `connectionSlice` 执行操作

**开发周期**：2-3周

---

### 1.2 对话即操作

**用户场景**：在聊天框输入"帮我把这个想法拆分成5个子任务"。

**实现方案**：
- AI 理解请求后，直接在画布上创建5张子任务卡片
- 自动按思维导图布局排列（复用 `calculateMindmapChildPositions`）
- 建立与父卡片的连接关系

**与现有功能整合**：
- 扩展现有 `handleQuickSprout` 逻辑
- 支持用户指定数量和方向

**开发周期**：1-2周

---

### 1.3 画布搜索与定位

**用户场景**：画布很大，用户想快速找到"竞品分析"相关的内容。

**实现方案**：
```
Cmd+F 打开搜索：
  - 实时搜索所有卡片内容
  - 匹配项高亮显示
  - 点击结果自动飞跃到目标卡片并居中
  - 支持正则和语义搜索（可选）
```

**技术实现**：
- 新建 `SearchModal.jsx`（已有类似组件）
- 添加 `panToCard(cardId)` 方法到 Canvas
- 临时高亮匹配卡片

**开发周期**：1周

---

## 2. 卡片关系增强

> 🔗 让卡片之间的关系更有意义，不只是一条线

### 2.1 带标签的连接线

**用户场景**：连接两张卡片后，用户想标注它们是"因果关系"还是"对立关系"。

**实现方案**：
```javascript
// connectionSlice 扩展
connections: [
  { from: 'a', to: 'b', label: '导致', color: '#4CAF50', style: 'arrow' },
  { from: 'c', to: 'd', label: '反对', color: '#F44336', style: 'dashed' }
]
```

**交互设计**：
- 双击连接线编辑标签
- 右键连接线选择预设关系类型
- 连接线中间显示文字标签

**开发周期**：2周

---

### 2.2 双向引用（Wiki链接）

**用户场景**：在卡片A中提到卡片B的内容，输入 `[[卡片B标题]]` 自动创建链接。

**实现方案**：
- 卡片编辑时识别 `[[...]]` 语法
- 弹出当前画板的卡片列表供选择
- 点击引用直接跳转到目标卡片
- 侧边栏显示"反向引用"（哪些卡片引用了本卡片）

**数据结构**：
```javascript
card: {
  content: '根据 [[用户研究结果]] 我们决定...',
  backlinks: ['card-123', 'card-456']  // 自动计算
}
```

**开发周期**：2-3周

---

### 2.3 关系图视图

**用户场景**：想看所有卡片之间的关系网络全貌。

**实现方案**：
- 新增"图谱视图"按钮
- 使用力导向布局渲染所有卡片和连接
- 节点大小反映引用数量
- 可缩放、可拖拽、可点击进入卡片

**技术选型**：
- 使用 `d3-force` 或 `react-force-graph`
- 复用现有卡片渲染逻辑

**开发周期**：3周

---

## 3. AI 生成增强

> 🤖 让 AI 不只是聊天，而是真正的内容生产者

### 3.1 矩阵式批量生成

**用户场景**：用户想从"价格/功能/体验"×"个人用户/企业用户"6个角度分析产品。

**实现方案**：
```
用户输入：生成 [价格, 功能, 体验] × [个人, 企业] 的分析

AI 生成 6 张卡片，自动排列成 3×2 矩阵：
       个人    企业
价格   📄      📄
功能   📄      📄
体验   📄      📄
```

**技术实现**：
- 解析矩阵表达式
- 并行调用 `AIManager.requestTask`
- 按grid布局自动排列

**开发周期**：2周

---

### 3.2 渐进式深度扩展

**用户场景**：用户有一个粗略想法，想让AI帮忙一层一层展开。

**实现方案**：
```
第1层：初始想法 → AI生成3个子话题
第2层：用户选择某个子话题 → AI继续生成3个子话题
第3层：继续深入...

形成一棵完整的思维树
```

**与现有功能的关系**：
- 基于现有 `handleQuickSprout` 递归调用
- 添加层级追踪和深度限制

**开发周期**：1周

---

### 3.3 多模型对比

**用户场景**：用户想看同一个问题，GPT-4 和 Claude 给出的不同回答。

**实现方案**：
- 聊天框新增"对比模式"按钮
- 同一问题同时发送给多个模型
- 并排显示不同模型的回答
- 用户可选择采纳某个回答

**技术实现**：
- `AIManager` 已支持并行任务
- UI 层面需要修改 `MessageItem.jsx` 支持多答案展示

**开发周期**：2周

---

### 3.4 上下文控制

**用户场景**：用户只想让AI基于选中的3张卡片回答，而不是整个对话历史。

**实现方案**：
```
发送框上方显示：
  [当前上下文: 3张选中卡片 | 562 tokens] ⚙️

点击 ⚙️ 打开上下文管理器：
  ☑️ 卡片A: 用户研究结果...
  ☑️ 卡片B: 技术方案...
  ☑️ 卡片C: 竞品分析...
  ☐ 包含对话历史
```

**技术实现**：
- 扩展现有 `ChatModal.jsx` 添加上下文选择器
- 修改 `AIManager._executeTask` 动态组装 messages

**开发周期**：2周

---

## 4. 数据与协作

> 📦 让数据流动起来，不再是孤岛

### 4.1 一键公开分享

**用户场景**：用户想把画板分享给朋友，朋友不需要登录就能查看。

**实现方案**：
```
点击分享 → 生成唯一链接
https://nexmap.app/share/abc123

链接设置：
  - 🔓 完全公开
  - 🔐 需要密码
  - ⏰ 7天后过期
```

**技术实现**：
- Firestore 新建 `publicBoards` collection
- 新建 `/share/[id]` 路由页面
- 只读渲染模式

**开发周期**：3周

---

### 4.2 画板快照/版本

**用户场景**：用户删错了东西，想回到1小时前的状态。

**实现方案**：
- 每小时自动创建快照（或手动创建）
- 快照列表显示时间和预览图
- 一键恢复到任意快照
- 快照对比：高亮显示差异

**数据存储**：
```javascript
boardSnapshots: [
  { timestamp: '2024-01-04T10:00:00', data: {...}, thumbnail: 'base64...' }
]
```

**开发周期**：2周

---

### 4.3 模板市场

**用户场景**：用户想用别人创建的"OKR规划模板"。

**实现方案**：
- 用户可将画板保存为模板（清除私人内容保留结构）
- 模板市场浏览和搜索
- 一键应用模板创建新画板
- 用户贡献的模板可获得展示

**技术实现**：
- Firestore `templates` collection
- 模板预览和应用逻辑

**开发周期**：4周

---

### 4.4 JSON/Markdown 导入导出

**用户场景**：用户想把现有的Notion笔记导入NexMap。

**实现方案**：
```
导入：
  - Markdown 文件 → 按标题层级创建卡片
  - JSON 数组 → 每项创建一张卡片
  - Notion 导出 → 解析并导入

导出：
  - 整个画板 → Markdown 文档
  - 整个画板 → JSON 数据
  - 选中卡片 → 复制为文本
```

**开发周期**：2周

---

## 5. 工作流自动化

> ⚡ 减少重复操作，让工具为你工作

### 5.1 智能标签

**用户场景**：用户创建卡片后，AI自动添加合适的标签。

**实现方案**：
- 卡片创建/更新后，AI 分析内容
- 自动推荐标签（用户可确认或忽略）
- 按标签筛选卡片

**技术实现**：
- 后台任务调用 AI 分析（低优先级）
- 标签数据存储在卡片 `tags` 字段

**开发周期**：1周

---

### 5.2 定时提醒

**用户场景**：用户给某张卡片设置提醒，到时间收到通知。

**实现方案**：
- 卡片右键菜单 → 设置提醒
- 选择日期时间
- 到时间通过浏览器通知提醒
- 可选：邮件提醒（需后端支持）

**技术实现**：
- 使用 `Notification API`
- 提醒数据存储在卡片 `reminder` 字段
- 后台 Service Worker 检查

**开发周期**：2周

---

### 5.3 每日摘要

**用户场景**：用户想回顾昨天的所有创作内容。

**实现方案**：
```
打开APP时显示：
┌───────────────────────────────────────┐
│ 📅 昨日回顾 (2024-01-03)              │
├───────────────────────────────────────┤
│ 你创建了 5 张新卡片                    │
│ 你编辑了 12 张卡片                     │
│ 最活跃的画板：产品规划                 │
│                                       │
│ [查看详情] [关闭]                      │
└───────────────────────────────────────┘
```

**技术实现**：
- 记录用户操作日志
- 每日首次打开时聚合展示

**开发周期**：1周

---

## 6. 浏览器扩展

> 🌐 让信息从网页直接流入画板

### 6.1 网页剪藏

**用户场景**：用户在浏览网页时，想快速保存某段内容到画板。

**实现方案**：
```
Chrome扩展：
  1. 选中网页文字
  2. 右键 → 保存到NexMap
  3. 选择目标画板
  4. 自动创建卡片（包含来源URL）
```

**技术实现**：
- Chrome Extension (Manifest V3)
- Content Script 获取选中内容
- 调用 NexMap API 创建卡片

**开发周期**：3周

---

### 6.2 网页AI总结

**用户场景**：用户想快速了解一篇长文章的要点。

**实现方案**：
```
扩展弹窗：
  [总结当前页面]
  
AI返回：
  📝 3分钟阅读
  
  要点：
  1. ...
  2. ...
  3. ...
  
  [保存到画板] [复制]
```

**开发周期**：2周

---

## 实施路线图

### 第一阶段（1-2个月）- 打磨AI核心
| 功能 | 预估 | 价值 |
|-----|-----|-----|
| 命令式画布操作 | 2周 | ⭐⭐⭐⭐⭐ |
| 对话即操作 | 1周 | ⭐⭐⭐⭐ |
| 画布搜索定位 | 1周 | ⭐⭐⭐⭐ |
| 上下文控制 | 2周 | ⭐⭐⭐⭐ |

### 第二阶段（3-4个月）- 丰富关系
| 功能 | 预估 | 价值 |
|-----|-----|-----|
| 带标签的连接线 | 2周 | ⭐⭐⭐ |
| 双向引用 | 3周 | ⭐⭐⭐⭐ |
| 矩阵式批量生成 | 2周 | ⭐⭐⭐⭐ |

### 第三阶段（5-6个月）- 开放生态
| 功能 | 预估 | 价值 |
|-----|-----|-----|
| 一键公开分享 | 3周 | ⭐⭐⭐⭐⭐ |
| 浏览器扩展 | 3周 | ⭐⭐⭐⭐ |
| 模板市场 | 4周 | ⭐⭐⭐ |

---

## 技术债务说明

在实施上述功能前，建议先处理：

1. **卡片数据结构扩展** - 统一添加 `tags`, `reminder`, `metadata` 字段
2. **API 层抽象** - 为浏览器扩展和公开分享准备 RESTful API
3. **离线优先架构** - 完善 IndexedDB 和云同步的冲突处理

---

> 📝 本文档基于代码分析编写，所有功能都有明确的实现路径。优先级可根据用户反馈调整。
