# 用户指导画布 (WelcomeCanvas) 加载逻辑

## 1. 当前状态 (Underlying BUG)
**根本原因**: 这是一个底层 BUG。`WelcomeCanvas.jsx` 组件已经开发完成，但在核心页面 (`App.jsx`, `BoardPage.jsx`) 中**从未被引入或调用**。
**结论**: 目前无论在什么情况下（包括无痕模式、新用户、老用户），该画布都**绝对不会出现**。

## 2. 之前误导性解释的澄清
关于 "云同步" 的解释是不准确的。
- 这是一个仅仅依赖于**本地浏览器缓存** (LocalStorage) 的功能，与账号云同步状态无关。
- 在无痕模式下，本应被视为 "全新设备" 而强制弹出，但由于代码未接入，所以没有出现。

## 3. 修复后的加载逻辑 (即将通过代码实现)
修复后，系统将严格遵循以下逻辑加载 "用户指导画布"：

### 触发条件
当用户进入 `BoardPage` (白板页面) 时，系统会检查本地存储标记。

### 判定流程
1. **检查标记**: 读取浏览器 LocalStorage 中的 `has_seen_welcome_v2` 字段。
2. **逻辑分支**:
   - **如果为 NULL/FALSE** (无痕模式或首次访问):
     - 立即渲染 `<WelcomeCanvas />` 组件。
     - 覆盖在白板最上层。
   - **如果为 TRUE** (曾经关闭过):
     - 跳过加载，直接显示白板。

### 关闭/完成机制
当用户点击 "开始创造" (Start Creating) 或关闭按钮时：
1. 系统执行 `localStorage.setItem('has_seen_welcome_v2', 'true')`。
2. 画布消失。
3. 此后在该浏览器/设备上不再自动弹出。

---
*此文档描述了代码修复后的预期行为。*
